{"ast":null,"code":"import React,{useState}from\"react\";import{supabase}from\"../supabaseClient\";import bcrypt from\"bcryptjs\";// Import bcryptjs\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Registration(){const[formData,setFormData]=useState({fullName:\"\",email:\"\",password:\"\",role:\"User\"});const[message,setMessage]=useState(\"\");// To store success or error message\nconst handleChange=e=>{const{name,value}=e.target;setFormData(prevData=>({...prevData,[name]:value}));};const handleSubmit=async e=>{e.preventDefault();console.log(formData);try{// Hash the password before inserting\nconst hashedPassword=await bcrypt.hash(formData.password,10);// Hash password with salt rounds\n// Insert form data into the 'users' table in Supabase\nconst{data,error}=await supabase.from(\"users\")// Replace with your table name\n.insert([{full_name:formData.fullName,email:formData.email,password:hashedPassword,// Store hashed password\nrole:formData.role}]);if(error){throw error;}console.log(\"Registration successful:\",data);setMessage(\"Registration Successful! Please login.\");setFormData({fullName:\"\",email:\"\",password:\"\",role:\"User\"});// Clear the form\n}catch(error){console.error(\"Error registering user:\",error);setMessage(\"Error during registration. Please try again.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-black text-white flex justify-center items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-6 text-center\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"bg-purple-900 p-6 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fullName\",className:\"block text-lg font-medium mb-2\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"fullName\",name:\"fullName\",value:formData.fullName,onChange:handleChange,className:\"w-full p-3 rounded-lg bg-purple-800 text-white border border-purple-700\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-lg font-medium mb-2\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange,className:\"w-full p-3 rounded-lg bg-purple-800 text-white border border-purple-700\",required:true,autoComplete:\"off\"// Prevents autofill\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-lg font-medium mb-2\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleChange,className:\"w-full p-3 rounded-lg bg-purple-800 text-white border border-purple-700\",required:true,autoComplete:\"new-password\"// Ensures new password input is not auto-filled\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"role\",className:\"block text-lg font-medium mb-2\",children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"role\",name:\"role\",value:formData.role,onChange:handleChange,className:\"w-full p-3 rounded-lg bg-purple-800 text-white border border-purple-700\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"User\",children:\"User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Moderator\",children:\"Moderator\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full p-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700\",children:\"Register\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:message})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account?\",\" \",/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:\"text-purple-400\",children:\"Login\"})]})})]})});}export default Registration;","map":{"version":3,"names":["React","useState","supabase","bcrypt","jsx","_jsx","jsxs","_jsxs","Registration","formData","setFormData","fullName","email","password","role","message","setMessage","handleChange","e","name","value","target","prevData","handleSubmit","preventDefault","console","log","hashedPassword","hash","data","error","from","insert","full_name","className","children","onSubmit","htmlFor","type","id","onChange","required","autoComplete","href"],"sources":["/home/saitejasangisapu/Desktop/BE-Project/Secure-Login-Backend/Secure-Login-Backend/src/components/Register.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { supabase } from \"../supabaseClient\";\nimport bcrypt from \"bcryptjs\"; // Import bcryptjs\n\nfunction Registration() {\n  const [formData, setFormData] = useState({\n    fullName: \"\",\n    email: \"\",\n    password: \"\",\n    role: \"User\",\n  });\n\n  const [message, setMessage] = useState(\"\"); // To store success or error message\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    console.log(formData);\n\n    try {\n      // Hash the password before inserting\n      const hashedPassword = await bcrypt.hash(formData.password, 10); // Hash password with salt rounds\n\n      // Insert form data into the 'users' table in Supabase\n      const { data, error } = await supabase\n        .from(\"users\") // Replace with your table name\n        .insert([\n          {\n            full_name: formData.fullName,\n            email: formData.email,\n            password: hashedPassword, // Store hashed password\n            role: formData.role,\n          },\n        ]);\n\n      if (error) {\n        throw error;\n      }\n\n      console.log(\"Registration successful:\", data);\n      setMessage(\"Registration Successful! Please login.\");\n      setFormData({ fullName: \"\", email: \"\", password: \"\", role: \"User\" }); // Clear the form\n    } catch (error) {\n      console.error(\"Error registering user:\", error);\n      setMessage(\"Error during registration. Please try again.\");\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-black text-white flex justify-center items-center\">\n      <div className=\"w-full max-w-md\">\n        <h1 className=\"text-4xl font-bold mb-6 text-center\">Register</h1>\n\n        <form\n          onSubmit={handleSubmit}\n          className=\"bg-purple-900 p-6 rounded-lg shadow-lg\"\n        >\n          <div className=\"mb-4\">\n            <label\n              htmlFor=\"fullName\"\n              className=\"block text-lg font-medium mb-2\"\n            >\n              Full Name\n            </label>\n            <input\n              type=\"text\"\n              id=\"fullName\"\n              name=\"fullName\"\n              value={formData.fullName}\n              onChange={handleChange}\n              className=\"w-full p-3 rounded-lg bg-purple-800 text-white border border-purple-700\"\n              required\n            />\n          </div>\n\n          <div className=\"mb-4\">\n            <label htmlFor=\"email\" className=\"block text-lg font-medium mb-2\">\n              Email\n            </label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              className=\"w-full p-3 rounded-lg bg-purple-800 text-white border border-purple-700\"\n              required\n              autoComplete=\"off\" // Prevents autofill\n            />\n          </div>\n\n          <div className=\"mb-4\">\n            <label\n              htmlFor=\"password\"\n              className=\"block text-lg font-medium mb-2\"\n            >\n              Password\n            </label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              className=\"w-full p-3 rounded-lg bg-purple-800 text-white border border-purple-700\"\n              required\n              autoComplete=\"new-password\" // Ensures new password input is not auto-filled\n            />\n          </div>\n\n          <div className=\"mb-6\">\n            <label htmlFor=\"role\" className=\"block text-lg font-medium mb-2\">\n              Role\n            </label>\n            <select\n              id=\"role\"\n              name=\"role\"\n              value={formData.role}\n              onChange={handleChange}\n              className=\"w-full p-3 rounded-lg bg-purple-800 text-white border border-purple-700\"\n            >\n              <option value=\"User\">User</option>\n              <option value=\"Admin\">Admin</option>\n              <option value=\"Moderator\">Moderator</option>\n            </select>\n          </div>\n\n          <button\n            type=\"submit\"\n            className=\"w-full p-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\n          >\n            Register\n          </button>\n        </form>\n\n        {message && (\n          <div className=\"mt-4 text-center\">\n            <p className=\"text-lg\">{message}</p>\n          </div>\n        )}\n\n        <div className=\"mt-4 text-center\">\n          <p>\n            Already have an account?{\" \"}\n            <a href=\"/login\" className=\"text-purple-400\">\n              Login\n            </a>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Registration;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}