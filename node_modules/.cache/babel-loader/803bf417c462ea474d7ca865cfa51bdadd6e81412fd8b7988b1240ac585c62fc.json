{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useLocation}from\"react-router-dom\";import{supabase}from\"../supabaseClient\";// Import supabase client\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Home(){var _location$state;const location=useLocation();// Get the location object\nconst userId=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.userId;// Get the userId from the state\nconst[userData,setUserData]=useState(null);// State to store fetched user data\nconst[loading,setLoading]=useState(true);// State to track loading status\nconst[error,setError]=useState(\"\");// State to track error messages\nuseEffect(()=>{const fetchUserData=async()=>{if(!userId){setError(\"No user data found.\");setLoading(false);return;}try{// Fetch user data by userId from the 'users' table\nconst{data,error}=await supabase.from(\"users\").select(\"*\").eq(\"id\",userId).single();// Fetch one row matching the userId\nif(error){throw error;}setUserData(data);// Set the fetched user data\nsetLoading(false);// Set loading to false once data is fetched\n}catch(err){setError(\"An error occurred while fetching user data.\");setLoading(false);}};fetchUserData();},[userId]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-black text-white flex justify-center items-center\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-r from-purple-800 to-black text-white flex justify-center items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-gray-900 p-8 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-6 text-center text-gradient text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500\",children:\"Welcome Home\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-center mb-4\",children:error}),userData?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-purple-400 text-center font-semibold\",children:[\"Welcome, \",userData.full_name,\"!\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-lg mt-2 text-white\",children:[\"Role: \",userData.role]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-4 text-center text-sm text-gray-300\",children:[\"You have \",userData.role,\" access. Manage settings here.\"]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-center font-semibold mt-4\",children:\"No user data found. Please log in again.\"})]})});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","useLocation","supabase","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","_location$state","location","userId","state","userData","setUserData","loading","setLoading","error","setError","fetchUserData","data","from","select","eq","single","err","className","children","full_name","role"],"sources":["/home/saitejasangisapu/Desktop/Secure-Login-Backend/src/components/Home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { supabase } from \"../supabaseClient\"; // Import supabase client\n\nfunction Home() {\n  const location = useLocation(); // Get the location object\n  const userId = location.state?.userId; // Get the userId from the state\n  const [userData, setUserData] = useState(null); // State to store fetched user data\n  const [loading, setLoading] = useState(true); // State to track loading status\n  const [error, setError] = useState(\"\"); // State to track error messages\n\n  useEffect(() => {\n    const fetchUserData = async () => {\n      if (!userId) {\n        setError(\"No user data found.\");\n        setLoading(false);\n        return;\n      }\n\n      try {\n        // Fetch user data by userId from the 'users' table\n        const { data, error } = await supabase\n          .from(\"users\")\n          .select(\"*\")\n          .eq(\"id\", userId)\n          .single(); // Fetch one row matching the userId\n\n        if (error) {\n          throw error;\n        }\n\n        setUserData(data); // Set the fetched user data\n        setLoading(false); // Set loading to false once data is fetched\n      } catch (err) {\n        setError(\"An error occurred while fetching user data.\");\n        setLoading(false);\n      }\n    };\n\n    fetchUserData();\n  }, [userId]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-black text-white flex justify-center items-center\">\n        <p>Loading...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-r from-purple-800 to-black text-white flex justify-center items-center\">\n      <div className=\"w-full max-w-md bg-gray-900 p-8 rounded-lg shadow-lg\">\n        <h1 className=\"text-4xl font-bold mb-6 text-center text-gradient text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500\">\n          Welcome Home\n        </h1>\n        {error && <p className=\"text-red-500 text-center mb-4\">{error}</p>}\n        {/* Display error */}\n        {userData ? (\n          <>\n            <p className=\"text-purple-400 text-center font-semibold\">\n              Welcome, {userData.full_name}!\n            </p>\n            <p className=\"text-center text-lg mt-2 text-white\">\n              Role: {userData.role}\n            </p>\n            <p className=\"mt-4 text-center text-sm text-gray-300\">\n              You have {userData.role} access. Manage settings here.\n            </p>\n            {/* Example of role-based data */}\n          </>\n        ) : (\n          <p className=\"text-red-500 text-center font-semibold mt-4\">\n            No user data found. Please log in again.\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}